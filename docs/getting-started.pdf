# Bridgelet Getting Started Guide

**Version:** 1.0 (MVP)  
**Last Updated:** January 2026 
**Audience:** Developers integrating Bridgelet into payment systems

---

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Environment Setup](#environment-setup)
3. [Installing Bridgelet SDK](#installing-bridgelet-sdk)
4. [Installing Bridgelet Core](#installing-bridgelet-core)
5. [Configuration](#configuration)
6. [Your First Ephemeral Account](#your-first-ephemeral-account)
7. [Testing the Claim Flow](#testing-the-claim-flow)
8. [Understanding the Full Lifecycle](#understanding-the-full-lifecycle)
9. [Common Issues & Troubleshooting](#common-issues-troubleshooting)
10. [Next Steps](#next-steps)

---

## 1. Prerequisites

### Development Environment

**Required Software:**
- **Node.js:** v20.0.0 or higher
- **PostgreSQL:** v15.0 or higher
- **Rust:** v1.75.0 or higher (for Core contracts)
- **Docker:** v24.0+ (recommended for local development)
- **Git:** v2.40+

**Recommended Tools:**
- Docker Compose (for easy PostgreSQL setup)
- Postman or Insomnia or httpyac (for API testing)
- VS Code with extensions:
  - ESLint
  - Prettier
  - rust-analyzer (if modifying contracts)

### Stellar Ecosystem Knowledge

**Basic Understanding Required:**
- Stellar accounts and keypairs
- Stellar assets and trustlines
- Transaction structure and fees
- Horizon API basics

**Resources:**
- [Stellar Documentation](https://developers.stellar.org)
- [Soroban Documentation](https://soroban.stellar.org)
- [Stellar Laboratory](https://laboratory.stellar.org)

### Stellar Accounts Needed

You'll need three Stellar testnet accounts:

1. **Funding Account**
   - Purpose: Creates and funds ephemeral accounts
   - Minimum Balance: 100 XLM (testnet)
   - Needs: USDC trustline (for testing)

2. **Recovery Account**
   - Purpose: Receives funds from expired accounts
   - Minimum Balance: 10 XLM (testnet)

3. **Recipient Wallet** (for testing claims)
   - Purpose: Destination for swept funds
   - Minimum Balance: 5 XLM (testnet)
   - Needs: USDC trustline

**Get Testnet Accounts:**
```bash
# Using Stellar Laboratory
# Visit: https://laboratory.stellar.org/#account-creator?network=test

# Or use curl
curl "https://friendbot.stellar.org?addr=YOUR_PUBLIC_KEY"
```

**Fund with Test USDC:**
```bash
# Test USDC issuer on testnet
USDC_ISSUER="GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5"

# Create trustline (use Stellar Laboratory or SDK)
# Then request test USDC from issuer
```

---

## 2. Environment Setup

### Option A: Docker Compose (Recommended)

Create `docker-compose.yml` in your project root:

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    container_name: bridgelet-db
    environment:
      POSTGRES_DB: bridgelet
      POSTGRES_USER: bridgelet_user
      POSTGRES_PASSWORD: bridgelet_pass
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    container_name: bridgelet-redis
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

Start services:
```bash
docker-compose up -d
```

### Option B: Local Installation

**Install PostgreSQL:**
```bash
# macOS
brew install postgresql@15
brew services start postgresql@15

# Ubuntu/Debian
sudo apt update
sudo apt install postgresql-15
sudo systemctl start postgresql

# Create database
psql postgres
CREATE DATABASE bridgelet;
CREATE USER bridgelet_user WITH PASSWORD 'bridgelet_pass';
GRANT ALL PRIVILEGES ON DATABASE bridgelet TO bridgelet_user;
\q
```

**Install Redis (optional, for caching):**
```bash
# macOS
brew install redis
brew services start redis

# Ubuntu/Debian
sudo apt install redis-server
sudo systemctl start redis
```

---

## 3. Installing Bridgelet SDK

### Clone the Repository

```bash
# Clone SDK repository
git clone https://github.com/yourusername/bridgelet-sdk.git
cd bridgelet-sdk
```

### Install Dependencies

```bash
# Install Node.js packages
npm install

# Or using yarn
yarn install
```

### Setup Environment Variables

```bash
# Copy example environment file
cp .env.example .env
```

Edit `.env` with your configuration:

```env
# Application
NODE_ENV=development
PORT=3000
APP_NAME=Bridgelet SDK

# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=bridgelet
DATABASE_USER=bridgelet_user
DATABASE_PASSWORD=bridgelet_pass
DATABASE_SYNC=true  # Auto-sync entities (dev only)
DATABASE_LOGGING=true

# Stellar Configuration
STELLAR_NETWORK=testnet
STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org
SOROBAN_RPC_URL=https://soroban-testnet.stellar.org

# Stellar Accounts (use your testnet accounts)
FUNDING_ACCOUNT_SECRET=SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
RECOVERY_ACCOUNT_PUBLIC=GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Smart Contract Addresses (deploy Core first, then add here)
EPHEMERAL_ACCOUNT_CONTRACT_ID=CXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
SWEEP_CONTROLLER_CONTRACT_ID=CXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Security
JWT_SECRET=your-super-secret-jwt-key-change-in-production
CLAIM_TOKEN_EXPIRY=2592000  # 30 days in seconds
API_RATE_LIMIT=100  # Requests per hour per IP

# Webhooks
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_TIMEOUT=5000  # milliseconds

# Redis (optional)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Logging
LOG_LEVEL=debug  # debug, info, warn, error
```

### Run Database Migrations

```bash
# Generate initial migration
npm run migration:generate -- -n InitialSchema

# Run migrations
npm run migration:run
```

### Start Development Server

```bash
# Development mode with hot reload
npm run start:dev

# Production mode
npm run build
npm run start:prod
```

**Verify Installation:**
```bash
# Check health endpoint
curl http://localhost:3000/health

# Expected response:
# {"status":"ok","timestamp":"2025-01-12T..."}
```

**Access API Documentation:**
- Swagger UI: `http://localhost:3000/api/docs`
- JSON spec: `http://localhost:3000/api/docs-json`

---

## 4. Installing Bridgelet Core

### Install Rust and Soroban CLI

```bash
# Install Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source $HOME/.cargo/env

# Verify installation
rustc --version
cargo --version

# Add WebAssembly target
rustup target add wasm32-unknown-unknown

# Install Soroban CLI
cargo install --locked soroban-cli --version 22.0.0

# Verify Soroban installation
soroban --version
```

### Clone Core Repository

```bash
# Clone Core repository
git clone https://github.com/yourusername/bridgelet-core.git
cd bridgelet-core
```

### Build Contracts

```bash
# Build all contracts
./scripts/build.sh

# Or manually
cd contracts/ephemeral_account
cargo build --target wasm32-unknown-unknown --release

cd ../sweep_controller
cargo build --target wasm32-unknown-unknown --release
```

**Build artifacts location:**
```
target/wasm32-unknown-unknown/release/
├── ephemeral_account.wasm
└── sweep_controller.wasm
```

### Deploy to Testnet

**Configure Stellar CLI:**
```bash
# Add testnet network
soroban network add testnet \
  --rpc-url https://soroban-testnet.stellar.org \
  --network-passphrase "Test SDF Network ; September 2015"

# Import your funding account
soroban keys add funding-account --secret-key

# Verify identity
soroban keys address funding-account
```

**Deploy Contracts:**

```bash
# Deploy EphemeralAccount contract
EPHEMERAL_CONTRACT_ID=$(soroban contract deploy \
  --wasm target/wasm32-unknown-unknown/release/ephemeral_account.wasm \
  --source funding-account \
  --network testnet)

echo "EphemeralAccount Contract ID: $EPHEMERAL_CONTRACT_ID"

# Deploy SweepController contract
SWEEP_CONTRACT_ID=$(soroban contract deploy \
  --wasm target/wasm32-unknown-unknown/release/sweep_controller.wasm \
  --source funding-account \
  --network testnet)

echo "SweepController Contract ID: $SWEEP_CONTRACT_ID"
```

**Save Contract IDs:**
```bash
# Add to SDK's .env file
echo "EPHEMERAL_ACCOUNT_CONTRACT_ID=$EPHEMERAL_CONTRACT_ID" >> ../bridgelet-sdk/.env
echo "SWEEP_CONTROLLER_CONTRACT_ID=$SWEEP_CONTRACT_ID" >> ../bridgelet-sdk/.env
```

### Verify Deployment

```bash
# Invoke a read-only method to test
soroban contract invoke \
  --id $EPHEMERAL_CONTRACT_ID \
  --source funding-account \
  --network testnet \
  -- \
  is_initialized
```

---

## 5. Configuration

### SDK Configuration Deep Dive

**Key Configuration Sections:**

#### Database Configuration
```typescript
// config/database.config.ts
export default () => ({
  database: {
    type: 'postgres',
    host: process.env.DATABASE_HOST,
    port: parseInt(process.env.DATABASE_PORT, 10),
    username: process.env.DATABASE_USER,
    password: process.env.DATABASE_PASSWORD,
    database: process.env.DATABASE_NAME,
    entities: ['dist/**/*.entity{.ts,.js}'],
    synchronize: process.env.NODE_ENV === 'development',
    logging: process.env.DATABASE_LOGGING === 'true',
  },
});
```

#### Stellar Configuration
```typescript
// config/stellar.config.ts
export default () => ({
  stellar: {
    network: process.env.STELLAR_NETWORK,
    horizonUrl: process.env.STELLAR_HORIZON_URL,
    sorobanRpcUrl: process.env.SOROBAN_RPC_URL,
    fundingSecret: process.env.FUNDING_ACCOUNT_SECRET,
    recoveryPublic: process.env.RECOVERY_ACCOUNT_PUBLIC,
    contracts: {
      ephemeralAccount: process.env.EPHEMERAL_ACCOUNT_CONTRACT_ID,
      sweepController: process.env.SWEEP_CONTROLLER_CONTRACT_ID,
    },
  },
});
```

### Core Configuration

Contracts are configured at deployment time. Key parameters:

```rust
// Set during deployment
pub struct ContractConfig {
    pub admin: Address,           // Admin account
    pub max_expiry: u64,          // Max expiry duration (30 days)
    pub min_expiry: u64,          // Min expiry duration (1 hour)
    pub base_fee: i128,           // Base transaction fee
}
```

---

## 6. Your First Ephemeral Account

### Using the API Directly

**Step 1: Create Ephemeral Account**

```bash
curl -X POST http://localhost:3000/accounts \
  -H "Content-Type: application/json" \
  -d '{
    "fundingSource": "GFUNDING_ACCOUNT_PUBLIC_KEY",
    "amount": "10",
    "asset": "USDC:GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5",
    "expiresIn": 2592000
  }'
```

**Expected Response:**
```json
{
  "accountId": "550e8400-e29b-41d4-a716-446655440000",
  "publicKey": "GEPHEMERAL7XXYYZZ...",
  "claimUrl": "https://claim.bridgelet.io/c/eyJhbGc...",
  "txHash": "a1b2c3d4e5f6...",
  "amount": "10",
  "asset": "USDC",
  "status": "pending_payment",
  "expiresAt": "2025-02-11T12:00:00Z",
  "createdAt": "2025-01-12T12:00:00Z"
}
```

**Step 2: Fund the Account**

The SDK automatically sends the initial payment from your funding account. Verify on Stellar:

```bash
# Check account on Horizon
curl "https://horizon-testnet.stellar.org/accounts/GEPHEMERAL7XXYYZZ..."
```

**Step 3: Check Account Status**

```bash
curl http://localhost:3000/accounts/550e8400-e29b-41d4-a716-446655440000
```

### Using the SDK Programmatically

**In Your Application:**

```typescript
import { Injectable } from '@nestjs/common';
import { BridgeletClient } from '@bridgelet/sdk';

@Injectable()
export class PaymentService {
  private bridgelet: BridgeletClient;

  constructor() {
    this.bridgelet = new BridgeletClient({
      apiUrl: 'http://localhost:3000',
      apiKey: 'your-api-key', // If authentication enabled
    });
  }

  async sendPayment(recipientPhone: string, amount: string) {
    // Create ephemeral account
    const account = await this.bridgelet.createAccount({
      amount,
      asset: 'USDC:GBBD47IF6LWK7P7MDEVSCWR7DPUWV3NY3DTQEVFL4NAT4AQH3ZLLFLA5',
      expiresIn: 30 * 24 * 60 * 60, // 30 days
    });

    // Send claim URL to recipient via SMS
    await this.sendSMS(recipientPhone, 
      `You've received ${amount} USDC! Claim here: ${account.claimUrl}`
    );

    return account;
  }
}
```

---

## 7. Testing the Claim Flow

### Manual Claim Test

**Step 1: Open Claim URL**

Take the `claimUrl` from the previous response and open it in a browser (or simulate with curl):

```bash
# Extract claim token from URL
CLAIM_TOKEN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# Verify claim token
curl http://localhost:3000/claims/verify \
  -H "Content-Type: application/json" \
  -d '{
    "claimToken": "'$CLAIM_TOKEN'"
  }'
```

**Expected Response:**
```json
{
  "valid": true,
  "accountId": "550e8400-e29b-41d4-a716-446655440000",
  "amount": "10",
  "asset": "USDC",
  "expiresAt": "2025-02-11T12:00:00Z"
}
```

**Step 2: Redeem Claim**

```bash
curl -X POST http://localhost:3000/claims/redeem \
  -H "Content-Type: application/json" \
  -d '{
    "claimToken": "'$CLAIM_TOKEN'",
    "destinationAddress": "GRECIPIENT_WALLET_PUBLIC_KEY"
  }'
```

**Expected Response:**
```json
{
  "success": true,
  "txHash": "f1e2d3c4b5a6...",
  "amountSwept": "10",
  "asset": "USDC",
  "destination": "GRECIPIENT_WALLET_PUBLIC_KEY",
  "sweptAt": "2025-01-12T12:05:00Z"
}
```

**Step 3: Verify Funds Received**

```bash
# Check recipient balance on Horizon
curl "https://horizon-testnet.stellar.org/accounts/GRECIPIENT_WALLET_PUBLIC_KEY"
```

Look for USDC balance increase of 10.

### Automated Integration Test

```typescript
// test/e2e/claim-flow.e2e-spec.ts
describe('Claim Flow (e2e)', () => {
  let app: INestApplication;
  let accountId: string;
  let claimToken: string;

  beforeAll(async () => {
    // Setup test app
    const moduleFixture = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    await app.init();
  });

  it('should create ephemeral account', async () => {
    const response = await request(app.getHttpServer())
      .post('/accounts')
      .send({
        fundingSource: process.env.TEST_FUNDING_ACCOUNT,
        amount: '10',
        asset: process.env.TEST_USDC_ASSET,
        expiresIn: 86400, // 1 day
      })
      .expect(201);

    accountId = response.body.accountId;
    claimToken = extractToken(response.body.claimUrl);
    
    expect(accountId).toBeDefined();
    expect(claimToken).toBeDefined();
  });

  it('should redeem claim successfully', async () => {
    const response = await request(app.getHttpServer())
      .post('/claims/redeem')
      .send({
        claimToken,
        destinationAddress: process.env.TEST_RECIPIENT_WALLET,
      })
      .expect(200);

    expect(response.body.success).toBe(true);
    expect(response.body.amountSwept).toBe('10');
  });

  it('should prevent double claims', async () => {
    await request(app.getHttpServer())
      .post('/claims/redeem')
      .send({
        claimToken,
        destinationAddress: process.env.TEST_RECIPIENT_WALLET,
      })
      .expect(400); // Bad request - already claimed
  });

  afterAll(async () => {
    await app.close();
  });
});
```

---

## 8. Understanding the Full Lifecycle

### Complete Flow Visualization

```
┌─────────────────────────────────────────────────────────────┐
│ 1. ACCOUNT CREATION                                         │
├─────────────────────────────────────────────────────────────┤
│ Enterprise → SDK: Create account                           │
│ SDK → Core Contract: Initialize restrictions               │
│ SDK → Stellar: Fund account                                │
│ SDK → Database: Store metadata                             │
│ SDK → Enterprise: Return claim URL                         │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ 2. NOTIFICATION (Your System)                               │
├─────────────────────────────────────────────────────────────┤
│ Enterprise → Recipient: Send claim URL (SMS/Email)        │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ 3. CLAIM INITIATION                                         │
├─────────────────────────────────────────────────────────────┤
│ Recipient → SDK: Open claim URL                           │
│ SDK: Verify claim token                                    │
│ SDK: Check account status                                  │
│ SDK → Recipient: Show claim page                          │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ 4. WALLET CONNECTION                                        │
├─────────────────────────────────────────────────────────────┤
│ Recipient: Connect wallet (Freighter/LOBSTR/etc)          │
│ OR                                                          │
│ Recipient: Create new wallet                               │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ 5. SWEEP EXECUTION                                          │
├─────────────────────────────────────────────────────────────┤
│ Recipient → SDK: Confirm sweep to wallet                  │
│ SDK → Core Contract: Execute sweep                         │
│ Core Contract: Validate authorization                      │
│ Core Contract → Stellar: Transfer funds                    │
│ Core Contract: Emit SweepExecuted event                   │
│ Core Contract: Merge ephemeral account                    │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ 6. POST-SWEEP                                               │
├─────────────────────────────────────────────────────────────┤
│ SDK: Update database (status = claimed)                   │
│ SDK → Webhooks: Fire sweep.completed event                │
│ Enterprise: Receive webhook notification                   │
│ Recipient: Funds now in permanent wallet ✅                │
└─────────────────────────────────────────────────────────────┘
```

### Alternative: Expiration Flow

```
┌─────────────────────────────────────────────────────────────┐
│ Account created but not claimed                            │
│ Expiry timestamp reached                                    │
└─────────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────────┐
│ SDK Cron Job: Detect expired accounts                     │
│ SDK → Core Contract: Execute expiration                    │
│ Core Contract → Recovery Account: Transfer funds          │
│ Core Contract: Merge account                              │
│ SDK → Webhooks: Fire account.expired event                │
└─────────────────────────────────────────────────────────────┘
```

---

## 9. Common Issues & Troubleshooting

### Issue 1: Database Connection Failed

**Symptoms:**
```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**Solutions:**
```bash
# Check PostgreSQL is running
docker ps | grep postgres
# OR
pg_isready

# Verify credentials
psql -U bridgelet_user -d bridgelet -h localhost

# Check .env file
cat .env | grep DATABASE
```

### Issue 2: Contract Deployment Failed

**Symptoms:**
```
Error: insufficient balance for transaction fees
```

**Solutions:**
```bash
# Check funding account balance
soroban keys address funding-account
curl "https://horizon-testnet.stellar.org/accounts/GFUNDING..."

# Get testnet XLM
curl "https://friendbot.stellar.org?addr=GFUNDING..."

# Verify Soroban RPC is accessible
curl https://soroban-testnet.stellar.org/health
```

### Issue 3: Claim Token Invalid

**Symptoms:**
```json
{
  "error": "Invalid claim token",
  "statusCode": 401
}
```

**Solutions:**
```bash
# Check token hasn't expired
# Decode JWT (use jwt.io or CLI tool)
echo $CLAIM_TOKEN | jwt decode

# Verify JWT_SECRET matches in .env
cat .env | grep JWT_SECRET

# Check claim hasn't already been used
curl http://localhost:3000/accounts/$ACCOUNT_ID
```

### Issue 4: Sweep Transaction Failed

**Symptoms:**
```json
{
  "error": "Sweep failed: tx_bad_auth",
  "statusCode": 500
}
```

**Solutions:**
```bash
# Verify destination account exists and has trustline
curl "https://horizon-testnet.stellar.org/accounts/GDESTINATION..."

# Check ephemeral account balance
curl "https://horizon-testnet.stellar.org/accounts/GEPHEMERAL..."

# Verify contract authorization
soroban contract invoke \
  --id $EPHEMERAL_CONTRACT_ID \
  --network testnet \
  -- \
  get_status
```

### Issue 5: Webhook Not Received

**Symptoms:**
- Webhook endpoint not receiving events

**Solutions:**
```bash
# Check webhook subscription exists
curl http://localhost:3000/webhooks

# Verify endpoint is accessible
curl -X POST https://your-webhook-url.com/test

# Check SDK logs
docker logs bridgelet-sdk | grep webhook

# Test webhook manually
curl -X POST http://localhost:3000/webhooks/test \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-webhook-url.com"}'
```

### Debug Mode

Enable detailed logging:

```env
# .env
LOG_LEVEL=debug
DATABASE_LOGGING=true
```

```bash
# Restart SDK
npm run start:dev

# Follow logs
tail -f logs/bridgelet.log
```

---

## 10. Next Steps

### Development Checklist

- [ ] Create testnet accounts (funding, recovery, recipient)
- [ ] Deploy Core contracts to testnet
- [ ] Configure SDK with contract IDs
- [ ] Create first ephemeral account
- [ ] Test full claim flow
- [ ] Setup webhook endpoint
- [ ] Test expiration flow
- [ ] Review security model
- [ ] Plan integration with your system

### Learning Resources

**Documentation:**
- [Integration Guide](./integration-guide.pdf)
- [API Reference](../bridgelet-sdk/docs/api-reference.md)
- [Security Model](./security-model.pdf)
- [Use Cases](./use-cases.pdf)

**Example Projects:**
- Simple payroll demo: `examples/payroll-demo/`
- NGO disbursement: `examples/aid-distribution/`
- Remittance flow: `examples/remittance/`

**Community:**
- GitHub Discussions
- Stellar Discord #bridgelet
- Weekly office hours (TBD)

### Production Readiness

Before deploying to mainnet:

1. **Security Audit**
   - Contract audit by third party
   - Penetration testing of SDK
   - Code review by Stellar Foundation

2. **Infrastructure**
   - Setup monitoring (Prometheus + Grafana)
   - Configure backups (PostgreSQL, Redis)
   - CDN for claim pages
   - Load balancer for SDK instances

3. **Operational**
   - Disaster recovery plan
   - Incident response procedures
   - User support channels
   - Documentation portal

4. **Legal & Compliance**
   - Terms of service
   - Privacy policy
   - AML/KYC considerations (if applicable)
   - Data retention policy

---

## Appendix A: Environment Variables Reference

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `NODE_ENV` | Yes | development | Environment mode |
| `PORT` | No | 3000 | API server port |
| `DATABASE_HOST` | Yes | - | PostgreSQL host |
| `DATABASE_PORT` | Yes | 5432 | PostgreSQL port |
| `DATABASE_NAME` | Yes | - | Database name |
| `DATABASE_USER` | Yes | - | Database username |
| `DATABASE_PASSWORD` | Yes | - | Database password |
| `STELLAR_NETWORK` | Yes | testnet | Network (testnet/mainnet) |
| `STELLAR_HORIZON_URL` | Yes | - | Horizon API URL |
| `SOROBAN_RPC_URL` | Yes | - | Soroban RPC URL |
| `FUNDING_ACCOUNT_SECRET` | Yes | - | Funding account secret key |
| `RECOVERY_ACCOUNT_PUBLIC` | Yes | - | Recovery account public key |
| `EPHEMERAL_ACCOUNT_CONTRACT_ID` | Yes | - | Contract ID |
| `SWEEP_CONTROLLER_CONTRACT_ID` | Yes | - | Contract ID |
| `JWT_SECRET` | Yes | - | JWT signing secret |
| `CLAIM_TOKEN_EXPIRY` | No | 2592000 | Token expiry (seconds) |
| `API_RATE_LIMIT` | No | 100 | Requests per hour |

---

## Appendix B: Quick Command Reference

```bash
# SDK Commands
npm run start:dev              # Start development server
npm run build                  # Build for production
npm run test                   # Run unit tests
npm run test:e2e              # Run integration tests
npm run migration:generate     # Generate migration
npm run migration:run          # Run migrations
npm run lint                   # Lint code
npm run format                 # Format code

# Core Commands
cargo build --release          # Build contracts
cargo test                     # Run tests
./scripts/build.sh            # Build all contracts
./scripts/deploy-testnet.sh   # Deploy to testnet

# Soroban Commands
soroban contract deploy        # Deploy contract
soroban contract invoke        # Invoke contract function
soroban keys add               # Add keypair
soroban network add            # Add network config

# Database Commands
psql -U bridgelet_user bridgelet  # Connect to database
docker-compose up -d              # Start Docker services
docker-compose logs -f            # Follow Docker logs
```

---

**Questions?** Open an issue on [GitHub](https://github.com/yourusername/bridgelet/issues) or join [Stellar Discord](https://discord.gg/stellardev).

**Ready to integrate?** Continue to [Integration Guide](./integration-guide.pdf).