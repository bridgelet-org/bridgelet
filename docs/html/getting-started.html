<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridgelet - Getting Started Guide</title>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-after: always; }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm;
            background: white;
        }

        h1 {
            color: #1a1a1a;
            border-bottom: 3px solid #28a745;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h2 {
            color: #28a745;
            margin-top: 30px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        h3 {
            color: #333;
            margin-top: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            border: none;
            margin-bottom: 5px;
        }

        .header .subtitle {
            color: #666;
            font-size: 14px;
        }

        .metadata {
            background: #f0fff4;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
        }

        .step-box {
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            background: #f0fff4;
        }

        .step-box h3 {
            margin-top: 0;
            color: #28a745;
        }

        .tip {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
        }

        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        pre code {
            background: transparent;
            color: #abb2bf;
        }

        ul, ol {
            padding-left: 25px;
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #28a745;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .command {
            background: #282c34;
            color: #61dafb;
            padding: 10px 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Bridgelet</h1>
        <p class="subtitle">Getting Started Guide</p>
    </div>

    <div class="metadata">
        <strong>Document Version:</strong> 0.1 (MVP)<br>
        <strong>Last Updated:</strong> January 2025<br>
        <strong>Estimated Time:</strong> 30 minutes<br>
        <strong>Difficulty:</strong> Beginner
    </div>

    <h2>1. Welcome to Bridgelet</h2>
    <p>
        This guide will help you set up Bridgelet and send your first payment to a recipient
        without a crypto wallet. By the end, you'll understand how to create ephemeral accounts,
        send claim links, and manage the payment lifecycle.
    </p>

    <h3>1.1 What You'll Need</h3>
    <ul>
        <li>Node.js 18+ and npm/yarn installed</li>
        <li>A Stellar testnet account with XLM (we'll help you create one)</li>
        <li>Basic knowledge of JavaScript/TypeScript</li>
        <li>15-30 minutes of your time</li>
    </ul>

    <h3>1.2 What You'll Build</h3>
    <p>A simple payment system that:</p>
    <ol>
        <li>Creates an ephemeral Stellar account</li>
        <li>Funds it with test XLM</li>
        <li>Generates a claim link for a recipient</li>
        <li>Allows the recipient to claim funds to their wallet</li>
    </ol>

    <div class="page-break"></div>

    <h2>2. Prerequisites Setup</h2>

    <div class="step-box">
        <h3>Step 1: Install Node.js</h3>
        <p>Ensure you have Node.js 18 or higher installed:</p>
        <code class="command">node --version</code>
        <p>If not installed, download from <a href="https://nodejs.org">nodejs.org</a></p>
    </div>

    <div class="step-box">
        <h3>Step 2: Create a Project Directory</h3>
        <pre><code>mkdir bridgelet-demo
cd bridgelet-demo
npm init -y</code></pre>
    </div>

    <div class="step-box">
        <h3>Step 3: Install Bridgelet SDK</h3>
        <pre><code># Install the SDK (testnet version)
npm install @bridgelet/sdk

# Install peer dependencies
npm install @stellar/stellar-sdk dotenv</code></pre>
    </div>

    <div class="tip">
        üí° <strong>Tip:</strong> The SDK is currently in development. For MVP testing,
        clone the repository directly:
        <pre><code>git clone https://github.com/bridgelet-org/bridgelet-sdk.git
cd bridgelet-sdk
npm install
npm run build</code></pre>
    </div>

    <h2>3. Configuration</h2>

    <div class="step-box">
        <h3>Step 4: Set Up Environment Variables</h3>
        <p>Create a <code>.env</code> file in your project root:</p>
        <pre><code># Stellar Network Configuration
STELLAR_NETWORK=testnet
STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org

# Your organization's Stellar account (we'll create this)
ORGANIZATION_SECRET_KEY=your_secret_key_here
ORGANIZATION_PUBLIC_KEY=your_public_key_here

# Bridgelet SDK Configuration
BRIDGELET_API_URL=http://localhost:3000
BRIDGELET_API_KEY=test_key_development</code></pre>
    </div>

    <div class="warning">
        ‚ö†Ô∏è <strong>Important:</strong> Never commit <code>.env</code> to version control.
        Add it to <code>.gitignore</code> immediately.
    </div>

    <div class="step-box">
        <h3>Step 5: Create a Testnet Account</h3>
        <p>Create a simple script <code>setup.js</code>:</p>
        <pre><code>const StellarSdk = require('@stellar/stellar-sdk');

async function createTestnetAccount() {
  // Generate a new keypair
  const pair = StellarSdk.Keypair.random();

  console.log('Public Key:', pair.publicKey());
  console.log('Secret Key:', pair.secret());

  // Fund the account using Friendbot
  const response = await fetch(
    `https://friendbot.stellar.org?addr=${pair.publicKey()}`
  );

  const result = await response.json();
  console.log('Account funded!', result);

  console.log('\nAdd these to your .env file:');
  console.log(`ORGANIZATION_PUBLIC_KEY=${pair.publicKey()}`);
  console.log(`ORGANIZATION_SECRET_KEY=${pair.secret()}`);
}

createTestnetAccount();</code></pre>

        <p>Run it:</p>
        <code class="command">node setup.js</code>

        <p>Copy the output keys to your <code>.env</code> file.</p>
    </div>

    <div class="page-break"></div>

    <h2>4. Your First Payment</h2>

    <div class="step-box">
        <h3>Step 6: Initialize the SDK</h3>
        <p>Create <code>index.js</code>:</p>
        <pre><code>require('dotenv').config();
const { BridgeletSDK } = require('@bridgelet/sdk');

// Initialize the SDK
const bridgelet = new BridgeletSDK({
  network: process.env.STELLAR_NETWORK,
  horizonUrl: process.env.STELLAR_HORIZON_URL,
  organizationSecretKey: process.env.ORGANIZATION_SECRET_KEY
});

console.log('‚úÖ Bridgelet SDK initialized!');</code></pre>
    </div>

    <div class="step-box">
        <h3>Step 7: Create an Ephemeral Account</h3>
        <p>Add this function to create your first ephemeral account:</p>
        <pre><code>async function createPayment() {
  try {
    // Create an ephemeral account with 10 XLM
    const account = await bridgelet.createEphemeralAccount({
      amount: '10',
      asset: 'XLM',
      recipientEmail: 'recipient@example.com',
      expiresIn: '7d', // Expires in 7 days
      metadata: {
        purpose: 'Test payment',
        orderId: 'ORDER-123'
      }
    });

    console.log('üéâ Ephemeral account created!');
    console.log('Account ID:', account.id);
    console.log('Public Key:', account.publicKey);
    console.log('Claim URL:', account.claimUrl);
    console.log('Expires:', account.expiresAt);

    return account;
  } catch (error) {
    console.error('‚ùå Error:', error.message);
  }
}

createPayment();</code></pre>
    </div>

    <div class="step-box">
        <h3>Step 8: Run Your First Payment</h3>
        <code class="command">node index.js</code>

        <p>You should see output like:</p>
        <pre><code>‚úÖ Bridgelet SDK initialized!
üéâ Ephemeral account created!
Account ID: abc123...
Public Key: GXXXXXXX...
Claim URL: https://claim.bridgelet.org/claim/abc123
Expires: 2026-01-30T00:00:00Z</code></pre>
    </div>

    <div class="tip">
        üí° <strong>Success!</strong> You've created your first ephemeral account.
        The recipient can now use the claim URL to receive their funds.
    </div>

    <div class="page-break"></div>

    <h2>5. Testing the Claim Flow</h2>

    <div class="step-box">
        <h3>Step 9: Simulate a Claim</h3>
        <p>Add a claim simulation function:</p>
        <pre><code>async function simulateClaim(accountId) {
  // Create a recipient wallet
  const recipientKeypair = StellarSdk.Keypair.random();

  console.log('Recipient wallet:', recipientKeypair.publicKey());

  try {
    // Claim the funds
    const result = await bridgelet.claimFunds({
      accountId: accountId,
      destinationPublicKey: recipientKeypair.publicKey(),
      verificationCode: 'test-code-123' // In production, this comes from email
    });

    console.log('‚úÖ Funds claimed successfully!');
    console.log('Transaction:', result.transactionId);
    console.log('Amount transferred:', result.amount);

    return result;
  } catch (error) {
    console.error('‚ùå Claim failed:', error.message);
  }
}

// Run the full flow
async function runDemo() {
  const account = await createPayment();

  if (account) {
    console.log('\nWaiting 5 seconds before claiming...\n');
    await new Promise(resolve => setTimeout(resolve, 5000));

    await simulateClaim(account.id);
  }
}

runDemo();</code></pre>
    </div>

    <h2>6. Understanding the Flow</h2>

    <h3>6.1 What Just Happened?</h3>
    <ol>
        <li><strong>Account Creation:</strong> Bridgelet created a temporary Stellar account</li>
        <li><strong>Funding:</strong> Your organization's account funded the ephemeral account with 10 XLM</li>
        <li><strong>Claim Link Generation:</strong> A unique, secure claim URL was created</li>
        <li><strong>Claim Execution:</strong> The recipient connected their wallet and claimed the funds</li>
        <li><strong>Auto-Sweep:</strong> Funds automatically transferred to recipient's permanent wallet</li>
        <li><strong>Account Closure:</strong> The ephemeral account was closed and removed</li>
    </ol>

    <h3>6.2 Check the Blockchain</h3>
    <p>You can verify the transactions on Stellar's testnet explorer:</p>
    <ol>
        <li>Visit <a href="https://stellar.expert/explorer/testnet">stellar.expert/explorer/testnet</a></li>
        <li>Search for the ephemeral account's public key</li>
        <li>View the creation, funding, and sweep transactions</li>
    </ol>

    <div class="page-break"></div>

    <h2>7. Common Operations</h2>

    <h3>7.1 Check Account Status</h3>
    <pre><code>async function checkStatus(accountId) {
  const status = await bridgelet.getAccountStatus(accountId);

  console.log('Status:', status.state); // 'created', 'funded', 'claimed', 'expired'
  console.log('Balance:', status.balance);
  console.log('Claimed:', status.isClaimed);
  console.log('Expired:', status.isExpired);
}</code></pre>

    <h3>7.2 Handle Expired Accounts</h3>
    <pre><code>async function recoverExpiredFunds(accountId) {
  try {
    const result = await bridgelet.recoverExpiredAccount(accountId);

    console.log('‚úÖ Funds recovered to organization wallet');
    console.log('Amount:', result.amount);
    console.log('Transaction:', result.transactionId);
  } catch (error) {
    console.error('‚ùå Recovery failed:', error.message);
  }
}</code></pre>

    <h3>7.3 List All Accounts</h3>
    <pre><code>async function listAccounts() {
  const accounts = await bridgelet.listAccounts({
    status: 'pending', // 'pending', 'claimed', 'expired', 'all'
    limit: 10,
    offset: 0
  });

  accounts.forEach(account => {
    console.log(`${account.id}: ${account.amount} ${account.asset}`);
  });
}</code></pre>

    <h2>8. Next Steps</h2>

    <h3>8.1 Integration Options</h3>
    <table>
        <thead>
            <tr>
                <th>Use Case</th>
                <th>Recommended Approach</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Payroll System</td>
                <td>Batch account creation, CSV import support</td>
            </tr>
            <tr>
                <td>Aid Distribution</td>
                <td>SMS-based claim links, low-bandwidth UI</td>
            </tr>
            <tr>
                <td>Rewards/Airdrops</td>
                <td>Social verification, anti-fraud checks</td>
            </tr>
            <tr>
                <td>Marketplace Payouts</td>
                <td>Webhook integration, instant claims</td>
            </tr>
        </tbody>
    </table>

    <h3>8.2 Additional Resources</h3>
    <ul>
        <li>üìò <a href="./architecture.pdf">Architecture Overview</a> - Deep dive into system design</li>
        <li>üîß <a href="./integration-guide.pdf">Integration Guide</a> - Production deployment guide</li>
        <li>üîí <a href="./security-model.pdf">Security Model</a> - Security best practices</li>
        <li>üí° <a href="./use-cases.pdf">Use Cases</a> - Real-world examples</li>
    </ul>

    <h3>8.3 Join the Community</h3>
    <ul>
        <li>GitHub: <a href="https://github.com/bridgelet-org">github.com/bridgelet-org</a></li>
        <li>Discussions: Share your use case and get help</li>
        <li>Issues: Report bugs and request features</li>
        <li>Discord: (Coming soon) Chat with other developers</li>
    </ul>

    <div class="tip">
        üí° <strong>Ready for production?</strong> Check the Integration Guide for
        deployment best practices, mainnet setup, and scaling considerations.
    </div>

    <div class="footer">
        <p>
            <strong>Bridgelet Getting Started Guide v0.1</strong><br>
            Questions? Open an issue: <a href="https://github.com/bridgelet-org/bridgelet/issues">github.com/bridgelet-org/bridgelet/issues</a>
        </p>
    </div>
</body>
</html>