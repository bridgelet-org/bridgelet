<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridgelet - Architecture Overview</title>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-after: always; }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm;
            background: white;
        }

        h1 {
            color: #1a1a1a;
            border-bottom: 3px solid #0066cc;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h2 {
            color: #0066cc;
            margin-top: 30px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        h3 {
            color: #333;
            margin-top: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            border: none;
            margin-bottom: 5px;
        }

        .header .subtitle {
            color: #666;
            font-size: 14px;
        }

        .metadata {
            background: #f5f5f5;
            padding: 15px;
            border-left: 4px solid #0066cc;
            margin: 20px 0;
        }

        .component-box {
            border: 2px solid #0066cc;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            background: #f8f9fa;
        }

        .component-box h3 {
            margin-top: 0;
            color: #0066cc;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        ul, ol {
            padding-left: 25px;
        }

        .diagram {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border: 1px dashed #ccc;
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #0066cc;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Bridgelet</h1>
        <p class="subtitle">Architecture Overview</p>
    </div>

    <div class="metadata">
        <strong>Document Version:</strong> 0.1 (MVP)<br>
        <strong>Last Updated:</strong> January 2025<br>
        <strong>Status:</strong> Early Development<br>
        <strong>Target Phase:</strong> Q1 2026
    </div>

    <h2>1. Overview</h2>
    <p>
        Bridgelet is an infrastructure SDK that enables organizations to send payments to recipients
        without requiring them to have crypto wallets or understand seed phrases. It creates secure,
        single-use Stellar accounts that automatically bridge recipients into permanent wallets when
        they claim funds.
    </p>

    <h3>1.1 Problem Statement</h3>
    <p>
        Mass payment systems (payroll, aid distribution, airdrops) face a critical barrier: recipients
        often lack crypto wallets or the technical knowledge to manage them. Traditional solutions
        require recipients to:
    </p>
    <ul>
        <li>Understand blockchain concepts</li>
        <li>Securely manage seed phrases</li>
        <li>Navigate complex wallet interfaces</li>
        <li>Perform setup before receiving funds</li>
    </ul>

    <h3>1.2 Solution Approach</h3>
    <p>
        Bridgelet creates temporary "bridge" accounts that hold funds until recipients are ready to claim them.
        The system automatically sweeps funds to recipients' permanent wallets upon claim, abstracting away
        the complexity of blockchain operations.
    </p>

    <div class="page-break"></div>

    <h2>2. System Architecture</h2>

    <h3>2.1 Core Components</h3>

    <div class="component-box">
        <h3>üîß Bridgelet Core (Smart Contracts)</h3>
        <p><strong>Repository:</strong> <code>bridgelet-core</code></p>
        <p><strong>Technology:</strong> Soroban (Rust)</p>
        <p><strong>Responsibilities:</strong></p>
        <ul>
            <li>On-chain account restrictions and validation</li>
            <li>Automatic sweep logic implementation</li>
            <li>Fund expiration and recovery mechanisms</li>
            <li>Single-use account enforcement</li>
        </ul>
    </div>

    <div class="component-box">
        <h3>‚öôÔ∏è Bridgelet SDK (Backend)</h3>
        <p><strong>Repository:</strong> <code>bridgelet-sdk</code></p>
        <p><strong>Technology:</strong> NestJS (TypeScript)</p>
        <p><strong>Responsibilities:</strong></p>
        <ul>
            <li>Account lifecycle management</li>
            <li>Claim authentication and verification</li>
            <li>Integration with payment platforms</li>
            <li>API endpoints for organizations</li>
        </ul>
    </div>

    <div class="component-box">
        <h3>üé® Bridgelet UI (Future)</h3>
        <p><strong>Repository:</strong> <code>bridgelet-frontend</code></p>
        <p><strong>Technology:</strong> Next.js (TypeScript)</p>
        <p><strong>Responsibilities:</strong></p>
        <ul>
            <li>Reference implementation for claim flows</li>
            <li>User-friendly claiming interface</li>
            <li>Wallet connection management</li>
            <li>Status tracking and notifications</li>
        </ul>
    </div>

    <h3>2.2 Data Flow</h3>
    <div class="diagram">
        <p><strong>Payment Flow Diagram</strong></p>
        <pre style="text-align: left;">
1. Organization ‚Üí Bridgelet SDK
   ‚îî‚îÄ Create ephemeral account request

2. Bridgelet SDK ‚Üí Stellar Network
   ‚îî‚îÄ Deploy smart contract
   ‚îî‚îÄ Create temporary account

3. Bridgelet SDK ‚Üí Organization
   ‚îî‚îÄ Return claim link/code

4. Organization ‚Üí Recipient
   ‚îî‚îÄ Send claim link (email/SMS/etc)

5. Recipient ‚Üí Bridgelet UI
   ‚îî‚îÄ Click claim link
   ‚îî‚îÄ Connect permanent wallet

6. Bridgelet SDK ‚Üí Smart Contract
   ‚îî‚îÄ Verify claim
   ‚îî‚îÄ Trigger auto-sweep

7. Smart Contract ‚Üí Recipient Wallet
   ‚îî‚îÄ Transfer funds
   ‚îî‚îÄ Close ephemeral account
        </pre>
    </div>

    <div class="page-break"></div>

    <h2>3. Technical Stack</h2>

    <table>
        <thead>
            <tr>
                <th>Component</th>
                <th>Technology</th>
                <th>Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Blockchain Layer</td>
                <td>Stellar (Soroban)</td>
                <td>Smart contract platform</td>
            </tr>
            <tr>
                <td>Smart Contracts</td>
                <td>Rust</td>
                <td>On-chain logic and restrictions</td>
            </tr>
            <tr>
                <td>Backend SDK</td>
                <td>NestJS (TypeScript)</td>
                <td>Account management API</td>
            </tr>
            <tr>
                <td>Frontend (Future)</td>
                <td>Next.js (TypeScript)</td>
                <td>User interface for claiming</td>
            </tr>
            <tr>
                <td>Database</td>
                <td>PostgreSQL</td>
                <td>Account metadata storage</td>
            </tr>
            <tr>
                <td>Authentication</td>
                <td>JWT + OAuth2</td>
                <td>Secure claim verification</td>
            </tr>
        </tbody>
    </table>

    <h2>4. Key Design Decisions</h2>

    <h3>4.1 Why Stellar/Soroban?</h3>
    <ul>
        <li><strong>Low transaction costs:</strong> Essential for micropayments and mass distribution</li>
        <li><strong>Fast finality:</strong> 3-5 second confirmations for better UX</li>
        <li><strong>Smart contract support:</strong> Soroban enables complex account restrictions</li>
        <li><strong>Built-in asset support:</strong> Native multi-currency capabilities</li>
    </ul>

    <h3>4.2 Ephemeral vs. Custodial</h3>
    <p>
        Bridgelet uses <strong>ephemeral accounts</strong> (non-custodial) rather than a custodial
        wallet approach because:
    </p>
    <ul>
        <li>Reduced regulatory burden for organizations</li>
        <li>Recipients maintain true ownership</li>
        <li>No single point of failure</li>
        <li>Transparent on-chain verification</li>
    </ul>

    <h3>4.3 Single-Use Design</h3>
    <p>
        Each ephemeral account is designed for exactly one payment claim cycle to:
    </p>
    <ul>
        <li>Minimize attack surface</li>
        <li>Simplify state management</li>
        <li>Reduce on-chain storage costs</li>
        <li>Prevent account reuse vulnerabilities</li>
    </ul>

    <div class="page-break"></div>

    <h2>5. Integration Points</h2>

    <h3>5.1 For Payment Platforms</h3>
    <pre><code>// Example integration
import { BridgeletSDK } from '@bridgelet/sdk';

const sdk = new BridgeletSDK({
  network: 'testnet',
  apiKey: process.env.BRIDGELET_API_KEY
});

// Create ephemeral account for recipient
const account = await sdk.createEphemeralAccount({
  amount: '100',
  asset: 'USDC',
  recipientEmail: 'user@example.com',
  expiresIn: '7d'
});

// Send claim link to recipient
await sendEmail(account.claimUrl);
</code></pre>

    <h3>5.2 For Recipients</h3>
    <p>Recipients interact through a simple claiming interface:</p>
    <ol>
        <li>Receive claim link via email/SMS</li>
        <li>Click link to open claiming interface</li>
        <li>Connect existing wallet OR create new wallet</li>
        <li>Confirm claim</li>
        <li>Funds automatically transferred to their wallet</li>
    </ol>

    <h2>6. Scalability Considerations</h2>

    <h3>6.1 Current Limitations (MVP)</h3>
    <ul>
        <li>Single asset per account</li>
        <li>One claim per ephemeral account</li>
        <li>Manual expiration handling</li>
        <li>Limited claim authentication methods</li>
    </ul>

    <h3>6.2 Future Enhancements</h3>
    <ul>
        <li>Multi-asset support per account</li>
        <li>Batched account creation</li>
        <li>Advanced claim verification (KYC, biometrics)</li>
        <li>Automated expiration processing</li>
        <li>Cross-chain bridge support</li>
    </ul>

    <h2>7. Development Roadmap</h2>

    <table>
        <thead>
            <tr>
                <th>Phase</th>
                <th>Timeline</th>
                <th>Deliverables</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>MVP (v0.1)</td>
                <td>Q1 2026</td>
                <td>Core contracts, SDK, basic claiming</td>
            </tr>
            <tr>
                <td>Beta (v0.2)</td>
                <td>Q2 2026</td>
                <td>UI reference, enhanced security, testing</td>
            </tr>
            <tr>
                <td>Production (v1.0)</td>
                <td>Q3 2026</td>
                <td>Mainnet deployment, audits, documentation</td>
            </tr>
        </tbody>
    </table>

    <div class="footer">
        <p>
            <strong>Bridgelet</strong> - Open Source Infrastructure for Stellar<br>
            For more information: <a href="https://github.com/bridgelet-org/bridgelet">github.com/bridgelet-org/bridgelet</a>
        </p>
    </div>
</body>
</html>